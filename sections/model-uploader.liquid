<section class="model-uploader-new">
  {%- style -%}
    /* Hide the native product form; show only the custom uploader */
    .product-form,
    .product__info-wrapper .product-form,
    .product__media-wrapper + .product__info-wrapper .product-form,
    .product__info-wrapper form[action*="cart/add"],
    .product__info-wrapper .add-to-cart-button,
    .product__info-wrapper .product-form__buttons,
    .product__info-wrapper .product-form__cart-submit,
    .product__info-wrapper .product-form__cart-submit-wrapper {
      display: none !important;
    }

    .model-uploader-new {
      background: #f8f9fa;
      min-height: 100vh;
      padding: 40px 0;
    }

    .uploader-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .uploader-grid {
      display: flex;
      gap: 40px;
      align-items: flex-start;
    }

    .uploader-left {
      flex: 1;
      min-width: 0;
    }

    .uploader-right {
      flex: 0 0 400px;
      background: #fff;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      height: fit-content;
      position: sticky;
      top: 20px;
    }

    .page-title {
      font-size: 32px;
      font-weight: 700;
      color: #333;
      margin-bottom: 30px;
      text-align: center;
    }

    .config-title {
      font-size: 24px;
      font-weight: 600;
      color: #333;
      margin-bottom: 25px;
      text-align: center;
    }

    /* 3D viewer */
    .model-viewer {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 30px;
      min-height: 400px;
      border: 2px solid #e0e0e0;
      position: relative;
    }

    .viewer-container {
      width: 100%;
      height: 400px;
      position: relative;
      background: #f8f9fa;
      border-radius: 8px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .viewer-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #666;
    }

    .viewer-placeholder svg {
      width: 64px;
      height: 64px;
      margin: 0 auto 16px;
      display: block;
      opacity: 0.5;
    }

    .viewer-placeholder p {
      font-size: 16px;
      margin: 0;
      text-align: center;
    }

    /* Upload area */
    .upload-area {
      background: #fff;
      border: 2px dashed #ddd;
      border-radius: 12px;
      padding: 40px 20px;
      text-align: center;
      margin-bottom: 30px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .upload-area:hover {
      border-color: #1976d2;
      background: #f0f7ff;
    }

    .upload-area.dragover {
      border-color: #1976d2;
      background: #e3f2fd;
    }

    .upload-content h3 {
      font-size: 18px;
      color: #333;
      margin: 16px 0 8px;
    }

    .upload-content p {
      color: #666;
      margin: 4px 0;
      font-size: 14px;
    }

    .upload-icon {
      width: 48px;
      height: 48px;
      color: #1976d2;
      margin: 0 auto;
    }

    .upload-btn {
      background: #1976d2;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 16px;
      transition: background 0.3s ease;
    }

    .upload-btn:hover {
      background: #1565c0;
    }

    /* Spec panel styles */
    .config-group {
      margin-bottom: 25px;
    }

    .config-label {
      display: block;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .config-select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      background: white;
    }

    .config-select:focus {
      outline: none;
      border-color: #1976d2;
      box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);
    }

    .radio-group {
      display: flex;
      gap: 20px;
    }

    .radio-item {
      display: flex;
      align-items: center;
      cursor: pointer;
      font-size: 14px;
    }

    .radio-item input[type="radio"] {
      margin-right: 8px;
    }

    /* Notes textarea */
    .config-textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      resize: vertical;
      min-height: 80px;
      font-family: inherit;
    }

    .config-textarea:focus {
      outline: none;
      border-color: #1976d2;
      box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);
    }

    .char-count {
      text-align: right;
      font-size: 12px;
      color: #666;
      margin-top: 4px;
    }

    /* 2D drawing reminder */
    .warning-note {
      background: #fff3e0;
      border: 1px solid #ff9800;
      border-radius: 8px;
      padding: 16px;
      margin: 20px 0;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .warning-icon {
      font-size: 20px;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .warning-text {
      font-size: 14px;
      color: #e65100;
      line-height: 1.5;
    }

    .warning-text strong {
      color: #bf360c;
    }

    /* File list styles */
    .file-list {
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
      border: 1px solid #e0e0e0;
    }

    .file-list h3 {
      margin: 0 0 15px 0;
      font-size: 16px;
      color: #333;
    }

        .file-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 12px;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          margin-bottom: 8px;
          background: #f8f9fa;
          transition: all 0.3s ease;
        }

        .file-item:hover {
          background: #f0f0f0;
        }

        .file-info {
          display: flex;
          flex-direction: column;
          flex: 1;
        }

        .file-name {
          font-weight: 600;
          color: #333;
          font-size: 14px;
          margin-bottom: 4px;
        }

        .file-size {
          font-size: 12px;
          color: #666;
          margin-bottom: 2px;
        }

        .file-dimensions {
          font-size: 11px;
          color: #888;
          font-style: italic;
        }

    .file-actions {
      display: flex;
      gap: 8px;
    }

    /* 2D file indicator */
    .file-2d-indicator {
      background: #e8f5e8;
      border: 1px solid #4caf50;
      border-radius: 4px;
      padding: 8px 12px;
      margin-top: 8px;
      font-size: 12px;
      color: #2e7d32;
      display: flex;
      align-items: center;
      gap: 6px;
    }

        .file-select {
          background: #e0e0e0;
          color: #333;
          border: none;
          padding: 6px 12px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
          transition: all 0.3s ease;
        }

        .file-select:hover {
          background: #d0d0d0;
        }

        .file-remove {
          background: #f44336;
          color: white;
          border: none;
          padding: 6px 12px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
          transition: all 0.3s ease;
        }

        .file-remove:hover {
          background: #d32f2f;
        }

    /* Scale slider */
    .config-range {
      width: 100%;
      margin: 8px 0;
    }

    .range-value {
      text-align: center;
      font-weight: 600;
      color: #1976d2;
    }

    /* Quantity selector */
    .quantity-selector {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .qty-btn {
      width: 36px;
      height: 36px;
      border: 1px solid #ddd;
      background: white;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 600;
    }

    .qty-btn:hover {
      background: #f5f5f5;
    }

    .qty-input {
      width: 60px;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 6px;
      text-align: center;
      font-size: 16px;
    }

    /* Dimensions display */
    .dimensions-display {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      text-align: center;
    }

    .dimensions-label {
      font-size: 12px;
      color: #666;
      margin-bottom: 4px;
    }

    .dimensions-value {
      font-size: 16px;
      font-weight: 600;
      color: #333;
    }


    /* Add-to-cart button */
    .add-to-cart-btn {
      width: 100%;
      background: #1976d2;
      color: white;
      border: none;
      padding: 16px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.3s ease;
      margin-top: 20px;
    }

    .add-to-cart-btn:hover:not(:disabled) {
      background: #1565c0;
      transform: translateY(-1px);
    }

    .add-to-cart-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }

    .btn-icon {
      width: 20px;
      height: 20px;
    }

    /* Info section */
    .info-section {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin: 25px 0;
    }

    .info-item {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
      font-size: 14px;
      color: #666;
    }

    .info-item:last-child {
      margin-bottom: 0;
    }

    .info-icon {
      width: 20px;
      height: 20px;
      margin-right: 12px;
      color: #4caf50;
    }

    /* Loading indicator */
    .loading-indicator {
      text-align: center;
      padding: 40px;
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #1976d2;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Error message */
    .error-message {
      background: #ffebee;
      color: #c62828;
      padding: 16px;
      border-radius: 8px;
      margin: 20px 0;
      border: 1px solid #ffcdd2;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .uploader-grid {
        flex-direction: column;
        gap: 20px;
      }
      
      .uploader-right {
        flex: none;
        position: static;
      }
      
      .page-title {
        font-size: 24px;
      }
      
      .config-title {
        font-size: 20px;
      }
    }
  {%- endstyle -%}

  <div class="uploader-container">
    <h1 class="page-title">Upload 3D Files</h1>
    
    <div class="uploader-grid">
      <!-- Left: 3D viewer and upload area -->
      <div class="uploader-left">
        <!-- 3D viewer -->
        <div class="model-viewer" id="model-viewer">
          <div class="viewer-container" id="viewer-container">
            <div class="viewer-placeholder">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                <polyline points="3.27,6.96 12,12.01 20.73,6.96"></polyline>
                <line x1="12" y1="22.08" x2="12" y2="12"></line>
              </svg>
              <p>Upload a 3D file to preview</p>
            </div>
          </div>
        </div>

        <!-- Upload area -->
        <div class="upload-area" id="dropzone">
          <div class="upload-content">
            <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7,10 12,15 17,10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <h3>Upload your CAD files</h3>
            <p>Supported: STP/STEP, plus matching 2D drawings (DWG/DXF/PDF)</p>
            <p class="file-limit">Up to 20 files per upload; max 100 MB per file</p>
            <button type="button" class="upload-btn" id="upload-btn">Choose files</button>
          </div>
          <input type="file" id="uploader-input" multiple accept=".stp,.step,.zip,.dwg,.dxf,.pdf" style="display: none;">
        </div>

        <!-- Loading indicator -->
        <div class="loading-indicator" id="loading-indicator" style="display: none;">
          <div class="spinner"></div>
          <p>Analyzing your design…</p>
        </div>

        <!-- Error message -->
        <div class="error-message" id="error-message" style="display: none;"></div>

        <!-- File list -->
        <div class="file-list" id="file-list" style="display: none;">
          <h3>Uploaded files</h3>
          <div class="file-items" id="file-items"></div>
        </div>
        </div>
        
      <!-- Right: specs -->
      <div class="uploader-right">
        <h2 class="config-title">Specifications</h2>
        
        <!-- Units -->
        <div class="config-group">
          <label class="config-label">Units</label>
          <div class="radio-group">
            <label class="radio-item">
              <input type="radio" name="unit" value="mm" checked>
              <span>Millimeters (mm)</span>
            </label>
            <label class="radio-item">
              <input type="radio" name="unit" value="in">
              <span>Inches (in)</span>
            </label>
      </div>
    </div>

        <!-- Material -->
        <div class="config-group">
          <label class="config-label">Material category</label>
          <select id="material-category" class="config-select">
            <option value="Aluminum Alloy">Aluminum alloy</option>
            <option value="Plastic">Plastic</option>
            <option value="Copper Alloy">Copper alloy</option>
            <option value="Alloy Steel">Alloy steel</option>
            <option value="Stainless Steel">Stainless steel</option>
          </select>
        </div>

        <div class="config-group">
          <label class="config-label">Material grade</label>
          <select id="material-type" class="config-select">
            <option value="Aluminum 6061">Aluminum 6061</option>
            <option value="Aluminum 7075">Aluminum 7075</option>
          </select>
        </div>

        <!-- Surface finish (optional, multi-select) -->
        <div class="config-group">
          <label class="config-label">Surface finish</label>
          <div class="radio-group" style="margin-bottom:8px;">
            <label class="radio-item">
              <input type="radio" name="surface-enabled" value="yes">
              <span>Finish required</span>
            </label>
            <label class="radio-item">
              <input type="radio" name="surface-enabled" value="no" checked>
              <span>No finish</span>
            </label>
          </div>
          <div id="surface-list"></div>
          <div style="margin-top:8px;color:#666;font-size:12px;line-height:1.5;">
            Note 1: Matte = low reflectivity; Gloss = high reflectivity.<br>
            Note 2: Bead blasting defaults to 100-grit.
          </div>
        </div>

        <!-- Tightest tolerance -->
        <div class="config-group">
          <label class="config-label">Tightest tolerance</label>
          <select id="tightest-tolerance" class="config-select">
            <option value="GB/T 1804-2000 m">GB/T 1804-2000 m</option>
            <option value="±0.10mm">±0.10mm</option>
            <option value="±0.05mm">±0.05mm</option>
          </select>
      </div>

        <!-- Surface roughness -->
        <div class="config-group">
          <label class="config-label">Surface roughness</label>
          <select id="surface-roughness" class="config-select">
            <option value="Ra3.2">Ra3.2</option>
            <option value="Ra1.6">Ra1.6</option>
          </select>
      </div>

        <!-- Threads -->
        <div class="config-group">
          <label class="config-label">Threads</label>
          <div class="radio-group">
            <label class="radio-item">
              <input type="radio" name="has-thread" value="yes">
              <span>Yes</span>
          </label>
            <label class="radio-item">
              <input type="radio" name="has-thread" value="no" checked>
              <span>No</span>
          </label>
        </div>
      </div>

        <!-- Assembly features -->
        <div class="config-group">
          <label class="config-label">Assembly features</label>
          <div class="radio-group">
            <label class="radio-item">
              <input type="radio" name="has-assembly-mark" value="yes">
              <span>Yes</span>
            </label>
            <label class="radio-item">
              <input type="radio" name="has-assembly-mark" value="no" checked>
              <span>No</span>
            </label>
      </div>
      </div>

        <!-- Dimensions -->
        <div class="dimensions-display" id="dimensions-display" style="display: none;">
          <div class="dimensions-label">Dimensions</div>
          <div class="dimensions-value" id="dimensions-value">0 × 0 × 0 mm</div>
      </div>


        <!-- Quantity -->
        <div class="config-group">
          <label class="config-label">Quantity</label>
          <div class="quantity-selector">
            <button type="button" class="qty-btn" id="qty-minus">-</button>
            <input type="number" id="qty" value="1" min="1" class="qty-input">
            <button type="button" class="qty-btn" id="qty-plus">+</button>
        </div>
      </div>

        <!-- Notes -->
        <div class="config-group">
          <label class="config-label">Notes</label>
          <textarea id="note" class="config-textarea" placeholder="Add special requirements (e.g., tolerances, finish, lead time)..." maxlength="200"></textarea>
        <div class="char-count">
          <span id="char-count">0</span>/200
        </div>
      </div>

      <!-- 2D drawing reminder -->
      <div class="warning-note">
        <div class="warning-icon">⚠️</div>
        <div class="warning-text">
          <strong>Important:</strong> If your part includes threads or assembly features, please upload the matching 2D drawing (DWG/DXF/PDF) for each 3D file so we can quote accurately.
        </div>
      </div>


        <!-- Request a Quote button -->
        <button type="button" class="add-to-cart-btn" id="add-to-cart" disabled>
          <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
          Request a Quote
        </button>

        <!-- Info -->
        <div class="info-section">
          <div class="info-item">
            <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12,6 12,12 16,14"></polyline>
            </svg>
            <span>Estimated lead time: 3–5 business days</span>
        </div>
          <div class="info-item">
            <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"></path>
              <circle cx="12" cy="12" r="10"></circle>
          </svg>
          <span>Quality assurance: 100% inspection</span>
          </div>
        </div>
      </div>
        </div>
      </div>

    <!-- Customer state (injected by Liquid for JS) -->
    <script>
      (function(){
        try {
          window.customerState = {
            loggedIn: {% if customer %}true{% else %}false{% endif %},
            hasAddress: {% if customer and customer.default_address %}true{% else %}false{% endif %},
            email: {% if customer %}'{{ customer.email | escape }}'{% else %}null{% endif %},
            address: {% if customer and customer.default_address %}{
              first_name: '{{ customer.default_address.first_name | escape }}',
              last_name: '{{ customer.default_address.last_name | escape }}',
              address1: '{{ customer.default_address.address1 | escape }}',
              address2: '{{ customer.default_address.address2 | escape }}',
              city: '{{ customer.default_address.city | escape }}',
              province: '{{ customer.default_address.province | escape }}',
              zip: '{{ customer.default_address.zip | escape }}',
              country: '{{ customer.default_address.country | escape }}',
              phone: '{{ customer.default_address.phone | escape }}'
            }{% else %}null{% endif %}
          };
        } catch (e) { window.customerState = { loggedIn: false, hasAddress: false, email: null }; }
      })();
    </script>

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/STLLoader.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js" defer></script>
  
  <!-- JSZip (ZIP extraction) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" defer></script>
  
  <!-- Online3DViewer engine (local) -->
  <script src="{{ 'o3dv.min.js' | asset_url }}" defer></script>
  
  <!-- Online3DViewer wrapper -->
  <script src="{{ 'o3dv-wrapper.js' | asset_url }}" defer></script>
  
  <!-- Login manager -->
  <script src="{{ 'login-manager.js' | asset_url }}" defer></script>
  <!-- Quote API client (App Proxy) -->
  <script src="{{ 'quote-api.js' | asset_url }}" defer></script>
  
  <!-- File storage -->
  <script src="{{ 'file-storage.js' | asset_url }}" defer></script>
  
  <!-- Email notification -->
  <script src="{{ 'email-notification.js' | asset_url }}" defer></script>
  
  <!-- Model uploader script -->
  <script src="{{ 'file-storage.js' | asset_url }}" defer></script>
  <script src="{{ 'model-uploader.js' | asset_url }}" defer></script>

  <!-- Hidden form for add-to-cart -->
  <form id="add-form" action="{{ routes.cart_add_url }}" method="post" enctype="multipart/form-data" style="display: none;">
    {% comment %} Prefer the current product's variant ID {% endcomment %}
    {% if product %}
      <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" id="product-variant-id">
      <script>
        // Store current product variant id globally
        window.currentProductVariantId = '{{ product.selected_or_first_available_variant.id }}';
        console.log('Model Uploader: using current product variant id:', window.currentProductVariantId);
      </script>
    {% elsif section.settings.product %}
        {% assign sel = section.settings.product %}
      <input type="hidden" name="id" value="{{ sel.selected_or_first_available_variant.id }}" id="section-variant-id">
      <script>
        // Store section-configured variant id globally
        window.currentProductVariantId = '{{ sel.selected_or_first_available_variant.id }}';
        console.log('Model Uploader: using section-configured variant id:', window.currentProductVariantId);
      </script>
    {% else %}
      <!-- Fallback variant ID (debug/testing) -->
      <input type="hidden" name="id" value="" id="fallback-variant-id">
      <script>
        console.warn('Model Uploader: no linked product configured; attempting to resolve variant id from page data.');
        
        // Attempt to resolve variant id from page data
        function getVariantIdFromPage() {
          // Method 1: product JSON
          const productData = document.querySelector('[data-product-json]');
          if (productData) {
            try {
              const product = JSON.parse(productData.textContent);
              if (product && product.selected_or_first_available_variant) {
                return product.selected_or_first_available_variant.id.toString();
              }
            } catch (e) {
              console.log('Failed to parse product data:', e);
            }
          }
          
          // Method 2: URL param
          const urlParams = new URLSearchParams(window.location.search);
          const variantId = urlParams.get('variant');
          if (variantId) {
            return variantId;
          }
          
          // Method 3: meta tag
          const metaVariant = document.querySelector('meta[name="variant-id"]');
          if (metaVariant) {
            return metaVariant.content;
          }
          
          return null;
        }
        
        // Resolve after DOM ready
        document.addEventListener('DOMContentLoaded', function() {
          const variantId = getVariantIdFromPage();
          const fallbackInput = document.getElementById('fallback-variant-id');
          
          if (variantId && fallbackInput) {
            fallbackInput.value = variantId;
            window.currentProductVariantId = variantId;
            console.log('Model Uploader: resolved variant id from page data:', variantId);
          } else {
            console.error('Model Uploader: unable to resolve variant id. Please use this section on a product page.');
          }
        });
      </script>
        {% endif %}
    
        <!-- Hidden props to carry custom options to backend -->
        <input type="hidden" id="prop-unit" name="properties[Units]" value="mm">
        <input type="hidden" id="prop-material" name="properties[Material]" value="">
        <input type="hidden" id="prop-material-category" name="properties[Material Category]" value="">
        <input type="hidden" id="prop-surface" name="properties[Surface Finish]" value="">
        <input type="hidden" id="prop-tightest" name="properties[Tightest Tolerance]" value="">
    <input type="hidden" id="prop-roughness" name="properties[Surface Roughness]" value="">
    <input type="hidden" id="prop-thread" name="properties[Threads]" value="">
    <input type="hidden" id="prop-assembly" name="properties[Assembly Features]" value="">
        <input type="hidden" id="prop-note" name="properties[Notes]" value="">
    <input type="hidden" id="prop-file" name="properties[Uploaded File]" type="file">
    <input type="hidden" id="form-qty" name="quantity" value="1">
    <input type="hidden" name="properties[Order Type]" value="3D Model Quote">
    <input type="hidden" name="properties[Quote Status]" value="Pending">
      </form>
</section>

  {% schema %}
  {
  "name": "3D Model Uploader",
  "tag": "section",
  "class": "section",
    "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Upload 3D Files"
    },
    {
      "type": "product",
      "id": "product",
      "label": "Linked product (for add-to-cart)"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "3D Model Uploader"
    }
  ]
  }
  {% endschema %}